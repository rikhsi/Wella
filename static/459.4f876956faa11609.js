"use strict";(self.webpackChunkWella=self.webpackChunkWella||[]).push([[459],{1459:(I,p,e)=>{e.r(p),e.d(p,{GoodsModule:()=>O});var l=e(9808),a=e(7152),i=e(3075),_=e(9727),o=e(5e3),x=e(9209),G=e(7558),b=e(251),c=e(1894),h=e(6462),m=e(4546),f=e(1047),g=e(8054),z=e(7581),v=e(6042),M=e(2643),T=e(2683),C=e(2124);function A(n,r){if(1&n&&o._UZ(0,"nz-option",30),2&n){const t=r.$implicit;o.Q6J("nzLabel",t.title)("nzValue",t.title)}}function y(n,r){1&n&&o._uU(0),2&n&&o.hij("\u0435\u0449\u0435 ",r.$implicit.length,"")}const Z=function(){return[20,20]},J=function(){return[0,20]},w=function(){return[0,24]};function L(n,r){if(1&n){const t=o.EpF();o.TgZ(0,"div",1)(1,"div",9)(2,"div",10)(3,"nz-form-control",11),o._UZ(4,"input",12),o.qZA()()(),o.TgZ(5,"div",9)(6,"div",10)(7,"nz-form-control",11),o._UZ(8,"input",13),o.qZA()()(),o.TgZ(9,"div",9)(10,"div",10)(11,"nz-form-control",11),o._UZ(12,"input",14),o.qZA()()(),o.TgZ(13,"div",9)(14,"div",10)(15,"nz-form-control",11),o._UZ(16,"input",15),o.qZA()()(),o.TgZ(17,"div",9)(18,"div",10)(19,"nz-form-control",11),o._UZ(20,"input",16),o.qZA()()(),o.TgZ(21,"div",9)(22,"div",10)(23,"nz-form-control",11),o._UZ(24,"input",17),o.qZA()()(),o.TgZ(25,"div",9)(26,"div",10)(27,"nz-form-control",11),o._UZ(28,"textarea",18),o.qZA()()(),o.TgZ(29,"div",9)(30,"div",1)(31,"div",2)(32,"div",10)(33,"nz-form-control",11)(34,"nz-select",19),o.YNc(35,A,1,2,"nz-option",20),o.qZA(),o.YNc(36,y,1,1,"ng-template",null,21,o.W1O),o.qZA()()(),o.TgZ(38,"div",2)(39,"div",10)(40,"nz-form-control",11)(41,"nz-select",22),o._UZ(42,"nz-option",23)(43,"nz-option",24),o.qZA()()()()()(),o.TgZ(44,"div",2)(45,"div",1)(46,"div",2)(47,"p",5),o._uU(48,"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u043e\u0442\u043e , \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 10 \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0439"),o.qZA()(),o.TgZ(49,"div",2)(50,"nz-upload",25),o.NdJ("nzFileListChange",function(s){return o.CHM(t),o.oxw().photoList=s}),o.TgZ(51,"button",26),o._UZ(52,"span",27),o._uU(53," \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b\u044b "),o.qZA()()()()(),o.TgZ(54,"div",2)(55,"div",1)(56,"div",4)(57,"button",28),o.NdJ("click",function(){return o.CHM(t),o.oxw().productsSubmit()}),o._uU(58,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"),o.qZA()(),o.TgZ(59,"div",4)(60,"button",29),o.NdJ("click",function(s){return o.CHM(t),o.oxw().resetForm(s)}),o._uU(61,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),o.qZA()()()()()}if(2&n){const t=o.MAs(37),u=o.oxw();o.Q6J("nzGutter",o.DdM(13,Z)),o.xp6(30),o.Q6J("nzGutter",o.DdM(14,J)),o.xp6(4),o.Q6J("nzMaxTagCount",3)("nzMaxTagPlaceholder",t),o.xp6(1),o.Q6J("ngForOf",u.categories),o.xp6(7),o.Q6J("nzValue",!0),o.xp6(1),o.Q6J("nzValue",!1),o.xp6(2),o.Q6J("nzGutter",o.DdM(15,w)),o.xp6(5),o.Q6J("nzFileList",u.photoList)("nzBeforeUpload",u.beforeUpload),o.xp6(1),o.Q6J("disabled",u.photoList.length>=10),o.xp6(4),o.Q6J("nzGutter",20),o.xp6(2),o.Q6J("nzLoading",u.uploading)}}function U(n,r){1&n&&(o.TgZ(0,"div",1)(1,"div",9)(2,"div",10)(3,"nz-form-control",11),o._UZ(4,"input",31),o.qZA()()(),o.TgZ(5,"div",9)(6,"div",10)(7,"nz-form-control",11),o._UZ(8,"input",32),o.qZA()()(),o.TgZ(9,"div",9)(10,"div",10)(11,"nz-form-control",11),o._UZ(12,"textarea",33),o.qZA()()()()),2&n&&o.Q6J("nzGutter",o.DdM(1,Z))}const S=function(){return[0,50]},D=[{path:"",component:(()=>{class n{constructor(t,u,s,d,Q,V){this.fb=t,this.msg=u,this.productsService=s,this.categoriesService=d,this.auth=Q,this.router=V,this.uploading=!1,this.photoList=[],this.switchValue=!1,this.beforeUpload=B=>(this.photoList=this.photoList.concat(B),!1),this.newGood=this.fb.group({title:[null,[i.kI.required]],title_uz:[null,[i.kI.required]],brand:[null,[i.kI.required]],country:[null,[i.kI.required]],size:[null,[i.kI.required]],color:[null,[i.kI.required]],color_uz:[null,[i.kI.required]],price:[null,[i.kI.required]],description:[null,[i.kI.required]],description_uz:[null,[i.kI.required]],category:[null,[i.kI.required]],available:[null,[i.kI.required]],isBestSeller:[!1],isCollection:[!1],categories_id:[null]})}resetForm(t){t.preventDefault(),this.photoList=[],this.newGood.reset();for(const u in this.newGood.controls)this.newGood.controls.hasOwnProperty(u)&&(this.newGood.controls[u].markAsPristine(),this.newGood.controls[u].updateValueAndValidity())}productsSubmit(){if(0===this.photoList.length&&this.msg.error("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u043e\u0442\u043e, \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 10 \u0444\u043e\u0442\u043e"),this.newGood.valid&&this.photoList.length>0){this.uploading=!0;const t=new FormData;this.setCategory(),this.photoList.forEach(u=>{t.append("file",u)}),t.append("data",JSON.stringify(this.newGood.value)),this.addSub=this.productsService.add(t).subscribe({next:()=>{this.uploading=!1,this.photoList=[],this.newGood.reset(),this.msg.success("\u0422\u043e\u0432\u0430\u0440 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d")},error:()=>{this.auth.removeToken(),this.router.navigate(["/login"]),this.msg.error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u043e\u0432\u0430\u0440")}})}this.newGood.invalid&&Object.values(this.newGood.controls).forEach(t=>{t.invalid&&(t.markAsDirty(),t.updateValueAndValidity({onlySelf:!0}))}),this.newGood.controls.title_uz.valid||this.msg.error("\u041f\u0435\u0440\u0435\u0432\u043e\u0434\u0438\u0442\u0435 \u043d\u0443\u0436\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435")}getCategories(){this.getSub=this.categoriesService.getCategory().subscribe({next:t=>{this.categories=t},error:()=>{this.msg.error(" \u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0441\u043f\u0438\u0441\u043e\u043a \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u0439")}})}setCategory(){let t=[],u=this.newGood.controls.category.value;this.categories.find(s=>{u.map(d=>{s.title===d&&t.push(s.id)})}),this.newGood.patchValue({categories_id:t})}ngOnInit(){this.getCategories()}ngOnDestroy(){this.addSub&&this.addSub.unsubscribe(),this.getSub&&this.getSub.unsubscribe()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(i.qu),o.Y36(_.dD),o.Y36(x.s),o.Y36(G.G),o.Y36(b.e8),o.Y36(a.F0))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-goods"]],features:[o._Bn([_.dD])],decls:13,vars:6,consts:[[1,"goods__container"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","24"],["nz-row","","nzJustify","space-between","nzAlign","middle"],["nz-col",""],[1,"goods__title"],["nzCheckedChildren","Uz",3,"ngModel","ngModelChange"],[3,"formGroup"],["nz-row","",3,"nzGutter",4,"ngIf"],["nz-col","","nzSpan","12"],["nz-row",""],["nzSpan","24","nzHasFeedback",""],["formControlName","title","nz-input","","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430",1,"goods__form__input"],["formControlName","brand","nz-input","","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0431\u0440\u0435\u043d\u0434 \u0442\u043e\u0432\u0430\u0440\u0430",1,"goods__form__input"],["formControlName","country","nz-input","","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0443 \u0442\u043e\u0432\u0430\u0440\u0430",1,"goods__form__input"],["formControlName","size","nz-input","","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0440\u0430\u0437\u043c\u0435\u0440\u044b \u0442\u043e\u0432\u0430\u0440\u0430",1,"goods__form__input"],["formControlName","color","nz-input","","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0446\u0432\u0435\u0442 \u0442\u043e\u0432\u0430\u0440\u0430",1,"goods__form__input"],["formControlName","price","nz-input","","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0446\u0435\u043d\u0443 \u0442\u043e\u0432\u0430\u0440\u0430",1,"goods__form__input"],["formControlName","description","nz-input","","rows","2","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430",1,"goods__form__textArea"],["formControlName","category","nzMode","multiple","nzPlaceHolder","\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043a\u0430\u0442\u0435\u0433\u043e\u0440\u0438\u044e",3,"nzMaxTagCount","nzMaxTagPlaceholder"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf"],["tagPlaceHolder",""],["formControlName","available","nzSize","large","nzPlaceHolder","\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432 \u043d\u0430\u043b\u0438\u0447\u0438\u0438",1,"goods__form__select"],["nzLabel","\u0415\u0441\u0442\u044c",3,"nzValue"],["nzLabel","\u041d\u0435\u0442\u0443",3,"nzValue"],[3,"nzFileList","nzBeforeUpload","nzFileListChange"],["nz-button","",3,"disabled"],["nz-icon","","nzType","upload"],["nz-button","","nzType","primary",1,"goods__form__buttons","goods__form__buttons__create",3,"nzLoading","click"],["nz-button","","nzType","primary",1,"goods__form__buttons","goods__form__buttons__reset",3,"click"],[3,"nzLabel","nzValue"],["formControlName","title_uz","nz-input","","placeholder","Mahsulot nomini to`ldiring",1,"goods__form__input"],["formControlName","color_uz","nz-input","","placeholder","Mahsulot rangini kiriting",1,"goods__form__input"],["formControlName","description_uz","nz-input","","rows","2","placeholder","Mahsulot haqida ma`lumot bering",1,"goods__form__textArea"]],template:function(t,u){1&t&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"p",5),o._uU(6,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0447\u0442\u043e\u0431\u044b \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0442\u043e\u0432\u0430\u0440"),o.qZA()(),o.TgZ(7,"div",4)(8,"nz-switch",6),o.NdJ("ngModelChange",function(d){return u.switchValue=d}),o.qZA()()()(),o.TgZ(9,"div",2)(10,"form",7),o.YNc(11,L,62,16,"div",8),o.YNc(12,U,13,2,"div",8),o.qZA()()()()),2&t&&(o.xp6(1),o.Q6J("nzGutter",o.DdM(5,S)),o.xp6(7),o.Q6J("ngModel",u.switchValue),o.xp6(2),o.Q6J("formGroup",u.newGood),o.xp6(1),o.Q6J("ngIf",!u.switchValue),o.xp6(1),o.Q6J("ngIf",u.switchValue))},directives:[c.SK,c.t3,h.i,i.JJ,i.On,i._Y,i.JL,i.sg,l.O5,m.Fd,i.Fj,f.Zp,i.u,g.Vq,l.sg,g.Ip,z.FY,v.ix,M.dQ,T.w,C.Ls],styles:[".goods__container[_ngcontent-%COMP%]{min-height:100%;padding:40px 20px}.goods__title[_ngcontent-%COMP%]{font-weight:700;font-size:20px;line-height:10px;color:#000}.goods__form__input[_ngcontent-%COMP%]{display:inline-block;width:100%;height:50px;padding:0 10px}.goods__form__textArea[_ngcontent-%COMP%]{width:100%;height:100px;padding:10px;resize:none}.goods__form__select[_ngcontent-%COMP%]{width:100%}.goods__form__value[_ngcontent-%COMP%]{width:70px}.goods__form__buttons[_ngcontent-%COMP%]{width:150px;height:50px;padding:0 10px;border:none}.goods__form__buttons__create[_ngcontent-%COMP%]{background-color:#3d56bd}.goods__form__buttons__create[_ngcontent-%COMP%]:disabled{color:#fff;opacity:.7;background-color:gray}.goods__form__buttons__reset[_ngcontent-%COMP%]{background-color:#cf4a4a}"]}),n})()}];let E=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[a.Bz.forChild(D)],a.Bz]}),n})();var F=e(1062),N=e(3640);let O=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[[l.ez,E,c.Jb,i.u5,i.UX,f.o7,m.U5,v.sL,F.aw,g.LV,z.cS,N.Qp,C.PV,h.m]]}),n})()}}]);
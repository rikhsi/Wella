"use strict";(self.webpackChunkWella=self.webpackChunkWella||[]).push([[129],{6129:(I,h,i)=>{i.r(h),i.d(h,{BannerModule:()=>U});var c=i(9808),g=i(7152),p=i(9727),n=i(5e3),z=i(3640),m=i(7501),C=i(5100),l=i(1894),d=i(868),r=i(8909),_=i(6042),v=i(2643),x=i(2683),f=i(2124),b=i(7823);function T(e,a){if(1&e){const t=n.EpF();n.TgZ(0,"th",17)(1,"button",18),n.NdJ("click",function(){return n.CHM(t),n.oxw().setActiveBanner()}),n._UZ(2,"span",19),n.TgZ(3,"span"),n._uU(4),n.qZA()()()}if(2&e){const t=n.oxw();n.Q6J("nzWidth","6%"),n.xp6(1),n.Q6J("disabled",t.setOfChecked.size<5||t.setOfChecked.size>5),n.xp6(3),n.Oqu(t.setOfChecked.size)}}function Z(e,a){1&e&&(n.TgZ(0,"th",17),n._uU(1,"\u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b"),n.qZA()),2&e&&n.Q6J("nzWidth","8%")}function B(e,a){if(1&e){const t=n.EpF();n.TgZ(0,"td",25),n.NdJ("nzCheckedChange",function(s){n.CHM(t);const u=n.oxw().$implicit;return n.oxw().isChecked(u.id,s)}),n.qZA()}if(2&e){const t=n.oxw().$implicit,o=n.oxw();n.Q6J("nzChecked",o.setOfChecked.has(t.id))}}function A(e,a){if(1&e){const t=n.EpF();n.TgZ(0,"td")(1,"div",26)(2,"div",15)(3,"button",27),n.NdJ("click",function(){n.CHM(t);const s=n.oxw().$implicit;return n.oxw().isActive(s.isActive,s.id)}),n._UZ(4,"span",28),n.qZA()()()()}}function O(e,a){if(1&e&&(n.TgZ(0,"tr"),n.YNc(1,B,1,1,"td",20),n.TgZ(2,"td"),n._uU(3),n.qZA(),n.TgZ(4,"td")(5,"div",21),n._UZ(6,"img",22),n.qZA()(),n.TgZ(7,"td",23),n._uU(8),n.qZA(),n.TgZ(9,"td",23),n._uU(10),n.qZA(),n.YNc(11,A,5,0,"td",24),n.qZA()),2&e){const t=a.$implicit,o=n.oxw();n.xp6(1),n.Q6J("ngIf",o.showRows),n.xp6(2),n.Oqu(t.id),n.xp6(3),n.Q6J("nzSrc",t.photo)("nzFallback",o.fallback),n.xp6(1),n.Q6J("nzEllipsis",!0),n.xp6(1),n.Oqu(t.title),n.xp6(1),n.Q6J("nzEllipsis",!0),n.xp6(1),n.Oqu(t.created_at),n.xp6(1),n.Q6J("ngIf",!o.showRows)}}function S(e,a){if(1&e&&(n.TgZ(0,"tr")(1,"td"),n._uU(2),n.qZA(),n.TgZ(3,"td")(4,"div",21),n._UZ(5,"img",22),n.qZA()(),n.TgZ(6,"td"),n._uU(7),n.qZA()()),2&e){const t=a.$implicit,o=n.oxw();n.xp6(2),n.Oqu(t.id),n.xp6(3),n.Q6J("nzSrc",t.photo)("nzFallback",o.fallback),n.xp6(2),n.Oqu(t.title)}}function J(e,a){if(1&e){const t=n.EpF();n.TgZ(0,"div",15)(1,"span",29),n.NdJ("click",function(){return n.CHM(t),n.oxw().showCheckbox()}),n.qZA()()}}const k=function(){return[0,80]},w=function(){return[0,40]},M=[{path:"",component:(()=>{class e{constructor(t,o,s,u){this.modal=t,this.adminService=o,this.bannersService=s,this.msg=u,this.allBanners=[],this.activeBanners=[],this.showRows=!1,this.tableLoading=!1,this.fallback="../../../assets/img/loading.jpg",this.tabsIndex=1,this.setOfChecked=new Set}isChecked(t,o){o?this.setOfChecked.add(t):o||this.setOfChecked.delete(t)}showCheckbox(){this.showRows=!this.showRows,this.setOfChecked.clear()}showConfirm(t){this.confirmModal=this.modal.confirm({nzTitle:"\u0425\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0431\u0430\u043d\u043d\u0435\u0440?",nzContent:"\u041d\u0430\u0436\u0438\u043c\u0430\u044f \u041e\u041a, \u0432\u044b \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u0443\u0434\u0430\u043b\u0438\u0442\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0439 \u0432\u0430\u043c\u0438 \u0431\u0430\u043d\u043d\u0435\u0440",nzCancelText:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",nzCentered:!0,nzClosable:!1,nzAutofocus:null,nzOnOk:()=>{this.deleteBanner(t)}})}tabsControle(t){this.tabsIndex=t}getBanners(){this.tableLoading=!0,this.getSub=this.bannersService.get().subscribe({next:t=>{this.allBanners=t,this.tableLoading=!1},error:()=>{this.tableLoading=!1,this.msg.error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c")}})}getActiveBanners(){this.bannersService.getTrue().subscribe({next:t=>{this.activeBanners=t,this.tableLoading=!1},error:()=>{this.tableLoading=!1}})}deleteBanner(t){this.tableLoading=!0,this.deleteSub=this.bannersService.delete(t).subscribe({next:()=>{this.allBanners=this.allBanners.filter(o=>o.id!==t),this.tableLoading=!1,this.msg.success(" \u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u043e")},error:()=>{this.tableLoading=!1,this.msg.error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c")}})}isActive(t,o){t?this.msg.error("\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0443\u0434\u0430\u043b\u0438\u0442\u044c, \u0431\u0430\u043d\u043d\u0435\u0440 \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0439"):this.showConfirm(o)}setActiveBanner(){const t=[];this.setOfChecked.forEach(o=>{t.push(o)}),this.bannersService.update(t).subscribe({next:()=>{this.getBanners(),this.getActiveBanners(),this.showCheckbox(),this.tableLoading=!1,this.msg.success(" \u0423\u0441\u043f\u0435\u0448\u043d\u043e \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d")},error:()=>{this.tableLoading=!1,this.msg.error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043d\u0430\u0437\u043d\u0430\u0447\u0438\u0442\u044c")}})}ngOnInit(){setTimeout(()=>{this.adminService.changePage(1)},10),this.getBanners(),this.getActiveBanners()}ngOnDestroy(){this.getSub&&this.getSub.unsubscribe(),this.deleteSub&&this.deleteSub.unsubscribe(),this.putSub&&this.putSub.unsubscribe(),this.getActuveSub&&this.getActuveSub.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(z.Sf),n.Y36(m.l),n.Y36(C.j),n.Y36(p.dD))},e.\u0275cmp=n.Xpm({type:e,selectors:[["app-banner"]],features:[n._Bn([p.dD])],decls:40,vars:18,consts:[[1,"banner__container"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","24"],["nz-col","","nzSpan","24",1,"tab"],[3,"nzType"],["nzTitle","\u0412\u0441\u0435 \u0431\u0430\u043d\u043d\u0435\u0440\u044b",3,"nzClick"],[3,"nzData","nzLoading","nzPageSize"],["banners",""],[3,"nzWidth",4,"ngIf"],[4,"ngFor","ngForOf"],["nzTitle","\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0431\u0430\u043d\u043d\u0435\u0440\u044b",3,"nzClick"],[3,"nzData","nzLoading","nzPageSize","nzShowPagination"],["active",""],["nz-row","","nzAlign","middle",1,"tab__buttons",3,"nzGutter"],["nz-col","",4,"ngIf"],["nz-col",""],["nz-icon","","title","\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c","nzType","reload","nzTheme","outline",1,"tab__reload",3,"click"],[3,"nzWidth"],["nz-button","","nzType","primary",3,"disabled","click"],["nz-icon","","nzType","check"],[3,"nzChecked","nzCheckedChange",4,"ngIf"],[1,"banner__img"],["nz-image","","onerror","this.parentNode.removeChild(this)",3,"nzSrc","nzFallback"],[3,"nzEllipsis"],[4,"ngIf"],[3,"nzChecked","nzCheckedChange"],["nz-row","","nzJustify","space-between"],["title","\u0423\u0434\u0430\u043b\u0438\u0442\u044c",1,"button",3,"click"],["nz-icon","","nzType","delete","nzTheme","outline"],["nz-icon","","title","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0435","nzType","folder-add","nzTheme","outline",1,"tab__add",3,"click"]],template:function(t,o){if(1&t&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",1)(4,"div",3)(5,"nz-tabset",4)(6,"nz-tab",5),n.NdJ("nzClick",function(){return o.tabsControle(1)}),n.TgZ(7,"nz-table",6,7)(9,"thead")(10,"tr"),n.YNc(11,T,5,3,"th",8),n.TgZ(12,"th"),n._uU(13,"ID"),n.qZA(),n.TgZ(14,"th"),n._uU(15,"\u0424\u043e\u0442\u043e"),n.qZA(),n.TgZ(16,"th"),n._uU(17,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),n.qZA(),n.TgZ(18,"th"),n._uU(19,"\u0414\u0430\u0442\u0430"),n.qZA(),n.YNc(20,Z,2,1,"th",8),n.qZA()(),n.TgZ(21,"tbody"),n.YNc(22,O,12,9,"tr",9),n.qZA()()(),n.TgZ(23,"nz-tab",10),n.NdJ("nzClick",function(){return o.tabsControle(2)}),n.TgZ(24,"nz-table",11,12)(26,"thead")(27,"tr")(28,"th"),n._uU(29,"ID"),n.qZA(),n.TgZ(30,"th"),n._uU(31,"\u0424\u043e\u0442\u043e"),n.qZA(),n.TgZ(32,"th"),n._uU(33,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),n.qZA()()(),n.TgZ(34,"tbody"),n.YNc(35,S,8,4,"tr",9),n.qZA()()()(),n.TgZ(36,"div",13),n.YNc(37,J,2,0,"div",14),n.TgZ(38,"div",15)(39,"span",16),n.NdJ("click",function(){return o.getBanners(),o.getActiveBanners()}),n.qZA()()()()()()()()),2&t){const s=n.MAs(8),u=n.MAs(25);n.xp6(1),n.Q6J("nzGutter",n.DdM(16,k)),n.xp6(2),n.Q6J("nzGutter",n.DdM(17,w)),n.xp6(2),n.Q6J("nzType","card"),n.xp6(2),n.Q6J("nzData",o.allBanners)("nzLoading",o.tableLoading)("nzPageSize",10),n.xp6(4),n.Q6J("ngIf",o.showRows),n.xp6(9),n.Q6J("ngIf",!o.showRows),n.xp6(2),n.Q6J("ngForOf",s.data),n.xp6(2),n.Q6J("nzData",o.activeBanners)("nzLoading",o.tableLoading)("nzPageSize",5)("nzShowPagination",!1),n.xp6(11),n.Q6J("ngForOf",u.data),n.xp6(1),n.Q6J("nzGutter",20),n.xp6(1),n.Q6J("ngIf",1===o.tabsIndex)}},directives:[l.SK,l.t3,d.xH,d.xw,r.N8,r.Om,r.$Z,c.O5,r.Uo,r._C,_.ix,v.dQ,x.w,f.Ls,r.p0,c.sg,r.h7,b.Ie,r.ky],styles:[".button[_ngcontent-%COMP%]{font-size:18px;background:inherit}.button[_ngcontent-%COMP%]:hover{color:red;transform:scale(119%)}.banner__container[_ngcontent-%COMP%]{position:relative;padding:20px 20px 0;height:100%;overflow-y:scroll}.banner__img[_ngcontent-%COMP%]{width:50px;height:50px;pointer-events:none}.banner__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.alert[_ngcontent-%COMP%]{position:fixed;z-index:1000;top:10%;right:35px;width:50%}.tab[_ngcontent-%COMP%]{position:relative;font-size:24px}.tab__buttons[_ngcontent-%COMP%]{position:absolute;margin-top:25px;top:0;right:0}.tab__reload[_ngcontent-%COMP%]{cursor:pointer}.tab__reload[_ngcontent-%COMP%]:hover{color:green}.tab__add[_ngcontent-%COMP%]{cursor:pointer}.tab__add[_ngcontent-%COMP%]:hover{color:green}[nz-button][_ngcontent-%COMP%]{width:100%}"]}),e})()}];let D=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[g.Bz.forChild(M)],g.Bz]}),e})();var Q=i(5737),y=i(7581),P=i(1047),L=i(9400);let U=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[[c.ez,D,r.HQ,Q.S,l.Jb,f.PV,y.cS,z.Qp,P.o7,_.sL,d.we,L.ZJ,b.Gb]]}),e})()}}]);
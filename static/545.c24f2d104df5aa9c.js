"use strict";(self.webpackChunkWella=self.webpackChunkWella||[]).push([[545],{4545:(x,c,n)=>{n.r(c),n.d(c,{GalleryModule:()=>A});var z=n(9808),s=n(7152),r=n(3075),h=n(9727),t=n(5e3),v=n(844),_=n(251),d=n(1894),p=n(4546),g=n(1047),f=n(7581),m=n(6042),G=n(2643),b=n(2683),y=n(2124);const C=function(){return[24,50]},L=function(){return[24]},J=function(){return[20,20]},M=[{path:"",component:(()=>{class e{constructor(o,u,i,l,T){this.fb=o,this.msg=u,this.galleryService=i,this.auth=l,this.router=T,this.photoList=[],this.loading=!1,this.uploading=!1,this.beforeUpload=Z=>(this.photoList=this.photoList.concat(Z),!1),this.newGallery=this.fb.group({title:[null,[r.kI.required]],isActive:[!1]})}reset(o){o.preventDefault(),this.newGallery.reset(),this.photoList=[];for(const u in this.newGallery.controls)this.newGallery.controls.hasOwnProperty(u)&&(this.newGallery.controls[u].markAsPristine(),this.newGallery.controls[u].updateValueAndValidity())}submit(){if(this.photoList.length<5)this.msg.error("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u043e\u0442\u043e, \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c \u0438 \u043c\u0438\u043d\u0438\u043c\u0443\u043c 5 \u0444\u043e\u0442\u043e");else if(this.newGallery.valid&&5===this.photoList.length){this.loading=!this.loading;const o=new FormData;this.photoList.forEach(u=>{o.append("file",u)}),o.append("data",JSON.stringify(this.newGallery.value)),this.addSub=this.galleryService.add(o).subscribe({next:()=>{this.photoList=[],this.newGallery.reset(),this.loading=!this.loading,this.msg.success("\u0413\u0430\u043b\u0435\u0440\u0435\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d\u0430")},error:()=>{this.loading=!this.loading,this.auth.removeToken(),this.router.navigate(["/login"]),this.msg.error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0433\u0430\u043b\u0435\u0440\u0435\u044e")}})}else Object.values(this.newGallery.controls).forEach(o=>{o.invalid&&(o.markAsDirty(),o.updateValueAndValidity({onlySelf:!0}))})}ngOnInit(){}ngOnDestroy(){this.addSub&&this.addSub.unsubscribe()}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(r.qu),t.Y36(h.dD),t.Y36(v.r),t.Y36(_.e8),t.Y36(s.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-gallery"]],features:[t._Bn([h.dD])],decls:28,vars:12,consts:[[1,"add__container"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","12"],[1,"add__title"],["nz-col","","nzSpan","24"],[3,"formGroup"],["nz-row",""],["nzSpan","24","nzHasFeedback",""],["formControlName","title","nz-input","","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430",1,"add__form__input"],["nz-col","","nzSpan","24",1,"add__upload"],[3,"nzFileList","nzBeforeUpload","nzFileListChange"],["nz-button","",3,"disabled"],["nz-icon","","nzType","upload"],["nz-col",""],["nz-button","","nzType","primary",1,"add__form__buttons","add__form__buttons__create",3,"nzLoading","click"],["nz-button","","nzType","primary",1,"add__form__buttons","add__form__buttons__reset",3,"click"]],template:function(o,u){1&o&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),t._uU(4,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0447\u0442\u043e\u0431\u044b \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u0443\u044e \u043a\u043e\u043b\u043b\u0435\u043a\u0446\u0438\u044e \u0434\u043b\u044f \u0413\u0430\u043b\u0435\u0440\u0435\u0438"),t.qZA()(),t.TgZ(5,"div",4)(6,"div",1)(7,"div",2)(8,"form",5)(9,"div",1)(10,"div",4)(11,"div",6)(12,"nz-form-control",7),t._UZ(13,"input",8),t.qZA()()(),t.TgZ(14,"div",9)(15,"div",6)(16,"nz-upload",10),t.NdJ("nzFileListChange",function(l){return u.photoList=l}),t.TgZ(17,"button",11),t._UZ(18,"span",12),t._uU(19," \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b "),t.qZA()()()(),t.TgZ(20,"div",4)(21,"div",1)(22,"div",13)(23,"button",14),t.NdJ("click",function(){return u.submit()}),t._uU(24,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"),t.qZA()(),t.TgZ(25,"div",13)(26,"button",15),t.NdJ("click",function(l){return u.reset(l)}),t._uU(27,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),t.qZA()()()()()()()()()()()),2&o&&(t.xp6(1),t.Q6J("nzGutter",t.DdM(9,C)),t.xp6(5),t.Q6J("nzGutter",t.DdM(10,L)),t.xp6(2),t.Q6J("formGroup",u.newGallery),t.xp6(1),t.Q6J("nzGutter",t.DdM(11,J)),t.xp6(7),t.Q6J("nzFileList",u.photoList)("nzBeforeUpload",u.beforeUpload),t.xp6(1),t.Q6J("disabled",u.photoList.length>4),t.xp6(4),t.Q6J("nzGutter",20),t.xp6(2),t.Q6J("nzLoading",u.loading))},directives:[d.SK,d.t3,r._Y,r.JL,r.sg,p.Fd,r.Fj,g.Zp,r.JJ,r.u,f.FY,m.ix,G.dQ,b.w,y.Ls],styles:[".add__container[_ngcontent-%COMP%]{min-height:100%;padding:40px 20px}.add__title[_ngcontent-%COMP%]{font-weight:700;font-size:24px;line-height:10px;color:#000}.add__form__input[_ngcontent-%COMP%]{display:inline-block;width:100%;height:40px;padding:0 10px}.add__form__buttons[_ngcontent-%COMP%]{width:150px;height:50px;padding:0 10px;border:none}.add__form__buttons__create[_ngcontent-%COMP%]{background-color:#3d56bd}.add__form__buttons__create[_ngcontent-%COMP%]:disabled{color:#fff;opacity:.7;background-color:gray}.add__form__buttons__reset[_ngcontent-%COMP%]{background-color:#cf4a4a}"]}),e})()}];let B=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[s.Bz.forChild(M)],s.Bz]}),e})();var D=n(1062),F=n(8054),S=n(3640);let A=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[z.ez,B,d.Jb,r.u5,r.UX,g.o7,p.U5,m.sL,D.aw,F.LV,f.cS,S.Qp,y.PV]]}),e})()}}]);
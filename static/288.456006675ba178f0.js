"use strict";(self.webpackChunkWella=self.webpackChunkWella||[]).push([[288],{5288:(Q,g,r)=>{r.r(g),r.d(g,{AdvertisingModule:()=>w});var b=r(9808),d=r(7152),o=r(3075),p=r(9727),n=r(5e3),P=r(5100),B=r(6001),A=r(251),l=r(1894),c=r(4546),f=r(1047),v=r(7581),m=r(6042),L=r(2643),C=r(2683),z=r(2124);const y=function(){return[24,50]},J=function(){return[24]},_=function(){return[20,20]},Z=[{path:"",component:(()=>{class i{constructor(t,e,a,u,F,M){this.fb=t,this.msg=e,this.bannerService=a,this.partnersService=u,this.auth=F,this.router=M,this.bannerPhotoList=[],this.partnerPhotoList=[],this.loadingBanner=!1,this.loadingPartner=!1,this.beforeBannerUpload=h=>(this.bannerPhotoList=this.bannerPhotoList.concat(h),!1),this.beforPartnerUpload=h=>(this.partnerPhotoList=this.partnerPhotoList.concat(h),!1),this.newBanner=this.fb.group({title:[null,[o.kI.required]],isActive:[!1]}),this.newPartner=this.fb.group({title:[null,[o.kI.required]],isActive:[!1]})}resetBanner(t){t.preventDefault(),this.newBanner.reset(),this.bannerPhotoList=[];for(const e in this.newBanner.controls)this.newBanner.controls.hasOwnProperty(e)&&(this.newBanner.controls[e].markAsPristine(),this.newBanner.controls[e].updateValueAndValidity())}resetPartner(t){t.preventDefault(),this.newPartner.reset(),this.partnerPhotoList=[];for(const e in this.newBanner.controls)this.newBanner.controls.hasOwnProperty(e)&&(this.newPartner.controls[e].markAsPristine(),this.newPartner.controls[e].updateValueAndValidity())}bannerSubmit(){if(0===this.bannerPhotoList.length)this.msg.error("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u043e\u0442\u043e, \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 1 \u0444\u043e\u0442\u043e");else if(this.newBanner.valid){this.loadingBanner=!this.loadingBanner;const t=new FormData;this.bannerPhotoList.forEach(e=>{t.append("file",e)}),t.append("data",JSON.stringify(this.newBanner.value)),this.addBannerSub=this.bannerService.add(t).subscribe({next:()=>{this.bannerPhotoList=[],this.newBanner.reset(),this.loadingBanner=!this.loadingBanner,this.msg.success("\u0411\u0430\u043d\u043d\u0435\u0440 \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d")},error:()=>{this.loadingBanner=!this.loadingBanner,this.auth.removeToken(),this.router.navigate(["/login"]),this.msg.error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0431\u0430\u043d\u043d\u0435\u0440")}})}else Object.values(this.newBanner.controls).forEach(t=>{t.invalid&&(t.markAsDirty(),t.updateValueAndValidity({onlySelf:!0}))})}partnerSubmit(){if(0===this.partnerPhotoList.length)this.msg.error("\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u043e\u0442\u043e, \u043c\u0430\u043a\u0441\u0438\u043c\u0443\u043c 1 \u0444\u043e\u0442\u043e");else if(this.newPartner.valid){this.loadingPartner=!this.loadingPartner;const t=new FormData;this.partnerPhotoList.forEach(e=>{t.append("file",e)}),t.append("data",JSON.stringify(this.newPartner.value)),this.addPartnerSub=this.partnersService.add(t).subscribe({next:()=>{this.partnerPhotoList=[],this.newPartner.reset(),this.loadingPartner=!this.loadingPartner,this.msg.success(" \u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0441\u043e\u0437\u0434\u0430\u043d")},error:()=>{this.loadingPartner=!this.loadingPartner,this.auth.removeToken(),this.router.navigate(["/login"]),this.msg.error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c")}})}else Object.values(this.newPartner.controls).forEach(t=>{t.invalid&&(t.markAsDirty(),t.updateValueAndValidity({onlySelf:!0}))})}ngOnInit(){}ngOnDestroy(){this.addBannerSub&&this.addBannerSub.unsubscribe(),this.addPartnerSub&&this.addPartnerSub.unsubscribe()}}return i.\u0275fac=function(t){return new(t||i)(n.Y36(o.qu),n.Y36(p.dD),n.Y36(P.j),n.Y36(B.U),n.Y36(A.e8),n.Y36(d.F0))},i.\u0275cmp=n.Xpm({type:i,selectors:[["app-advertising"]],features:[n._Bn([p.dD])],decls:52,vars:20,consts:[[1,"add__container"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","12"],[1,"add__title"],["nz-col","","nzSpan","24"],[3,"formGroup"],["nz-row",""],["nzSpan","24","nzHasFeedback",""],["formControlName","title","nz-input","","placeholder","\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0442\u043e\u0432\u0430\u0440\u0430",1,"add__form__input"],["nz-col","","nzSpan","24",1,"add__upload"],[3,"nzFileList","nzBeforeUpload","nzFileListChange"],["nz-button","",3,"disabled"],["nz-icon","","nzType","upload"],["nz-col",""],["nz-button","","nzType","primary",1,"add__form__buttons","add__form__buttons__create",3,"nzLoading","click"],["nz-button","","nzType","primary",1,"add__form__buttons","add__form__buttons__reset",3,"click"]],template:function(t,e){1&t&&(n.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"p",3),n._uU(4,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0447\u0442\u043e\u0431\u044b \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u0440\u0435\u043a\u043b\u0430\u043c\u043d\u044b\u0439 \u0431\u0430\u043d\u043d\u0435\u0440"),n.qZA()(),n.TgZ(5,"div",2)(6,"p",3),n._uU(7,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0434\u0430\u043d\u043d\u044b\u0435 \u0447\u0442\u043e\u0431\u044b \u0441\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0430\u0440\u0442\u043d\u0451\u0440\u0430"),n.qZA()(),n.TgZ(8,"div",4)(9,"div",1)(10,"div",2)(11,"form",5)(12,"div",1)(13,"div",4)(14,"div",6)(15,"nz-form-control",7),n._UZ(16,"input",8),n.qZA()()(),n.TgZ(17,"div",9)(18,"div",6)(19,"nz-upload",10),n.NdJ("nzFileListChange",function(u){return e.bannerPhotoList=u}),n.TgZ(20,"button",11),n._UZ(21,"span",12),n._uU(22," \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b "),n.qZA()()()(),n.TgZ(23,"div",4)(24,"div",1)(25,"div",13)(26,"button",14),n.NdJ("click",function(){return e.bannerSubmit()}),n._uU(27,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"),n.qZA()(),n.TgZ(28,"div",13)(29,"button",15),n.NdJ("click",function(u){return e.resetBanner(u)}),n._uU(30,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),n.qZA()()()()()()(),n.TgZ(31,"div",2)(32,"form",5)(33,"div",1)(34,"div",4)(35,"div",6)(36,"nz-form-control",7),n._UZ(37,"input",8),n.qZA()()(),n.TgZ(38,"div",9)(39,"div",6)(40,"nz-upload",10),n.NdJ("nzFileListChange",function(u){return e.partnerPhotoList=u}),n.TgZ(41,"button",11),n._UZ(42,"span",12),n._uU(43," \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b "),n.qZA()()()(),n.TgZ(44,"div",4)(45,"div",1)(46,"div",13)(47,"button",14),n.NdJ("click",function(){return e.partnerSubmit()}),n._uU(48,"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"),n.qZA()(),n.TgZ(49,"div",13)(50,"button",15),n.NdJ("click",function(u){return e.resetPartner(u)}),n._uU(51,"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c"),n.qZA()()()()()()()()()()()),2&t&&(n.xp6(1),n.Q6J("nzGutter",n.DdM(16,y)),n.xp6(8),n.Q6J("nzGutter",n.DdM(17,J)),n.xp6(2),n.Q6J("formGroup",e.newBanner),n.xp6(1),n.Q6J("nzGutter",n.DdM(18,_)),n.xp6(7),n.Q6J("nzFileList",e.bannerPhotoList)("nzBeforeUpload",e.beforeBannerUpload),n.xp6(1),n.Q6J("disabled",e.bannerPhotoList.length>0),n.xp6(4),n.Q6J("nzGutter",20),n.xp6(2),n.Q6J("nzLoading",e.loadingBanner),n.xp6(6),n.Q6J("formGroup",e.newPartner),n.xp6(1),n.Q6J("nzGutter",n.DdM(19,_)),n.xp6(7),n.Q6J("nzFileList",e.partnerPhotoList)("nzBeforeUpload",e.beforPartnerUpload),n.xp6(1),n.Q6J("disabled",e.partnerPhotoList.length>0),n.xp6(4),n.Q6J("nzGutter",20),n.xp6(2),n.Q6J("nzLoading",e.loadingPartner))},directives:[l.SK,l.t3,o._Y,o.JL,o.sg,c.Fd,o.Fj,f.Zp,o.JJ,o.u,v.FY,m.ix,L.dQ,C.w,z.Ls],styles:[".add__container[_ngcontent-%COMP%]{min-height:100%;padding:40px 20px}.add__title[_ngcontent-%COMP%]{font-weight:700;font-size:24px;line-height:10px;color:#000}.add__form__input[_ngcontent-%COMP%]{display:inline-block;width:100%;height:40px;padding:0 10px}.add__form__buttons[_ngcontent-%COMP%]{width:150px;height:50px;padding:0 10px;border:none}.add__form__buttons__create[_ngcontent-%COMP%]{background-color:#3d56bd}.add__form__buttons__create[_ngcontent-%COMP%]:disabled{color:#fff;opacity:.7;background-color:gray}.add__form__buttons__reset[_ngcontent-%COMP%]{background-color:#cf4a4a}"]}),i})()}];let S=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[[d.Bz.forChild(Z)],d.Bz]}),i})();var D=r(1062),T=r(8054),U=r(3640);let w=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=n.oAB({type:i}),i.\u0275inj=n.cJS({imports:[[b.ez,S,l.Jb,o.u5,o.UX,f.o7,c.U5,m.sL,D.aw,T.LV,v.cS,U.Qp,z.PV]]}),i})()}}]);
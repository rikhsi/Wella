"use strict";(self.webpackChunkWella=self.webpackChunkWella||[]).push([[645],{4645:(F,g,i)=>{i.r(g),i.d(g,{GalleryModule:()=>q});var u=i(9808),h=i(7152),p=i(9727),t=i(5e3),z=i(3640),Z=i(7501),m=i(844),c=i(1894),d=i(868),r=i(8909),_=i(6042),C=i(2643),v=i(2683),f=i(2124),b=i(7823);function T(o,a){if(1&o){const n=t.EpF();t.TgZ(0,"th",17)(1,"button",18),t.NdJ("click",function(){return t.CHM(n),t.oxw().setActiveBanner()}),t._UZ(2,"span",19),t.TgZ(3,"span"),t._uU(4),t.qZA()()()}if(2&o){const n=t.oxw();t.Q6J("nzWidth","6%"),t.xp6(1),t.Q6J("disabled",n.setOfChecked.size<3||n.setOfChecked.size>3),t.xp6(3),t.Oqu(n.setOfChecked.size)}}function x(o,a){1&o&&(t.TgZ(0,"th",17),t._uU(1,"\u0418\u043d\u0441\u0442\u0440\u0443\u043c\u0435\u043d\u0442\u044b"),t.qZA()),2&o&&t.Q6J("nzWidth","8%")}function A(o,a){if(1&o){const n=t.EpF();t.TgZ(0,"td",25),t.NdJ("nzCheckedChange",function(l){t.CHM(n);const s=t.oxw().$implicit;return t.oxw().isChecked(s.id,l)}),t.qZA()}if(2&o){const n=t.oxw().$implicit,e=t.oxw();t.Q6J("nzChecked",e.setOfChecked.has(n.id))}}function y(o,a){if(1&o){const n=t.EpF();t.TgZ(0,"td")(1,"div",26)(2,"div",15)(3,"button",27),t.NdJ("click",function(){t.CHM(n);const l=t.oxw().$implicit;return t.oxw().isActive(l.isActive,l.id)}),t._UZ(4,"span",28),t.qZA()()()()}}function k(o,a){if(1&o&&(t.TgZ(0,"tr"),t.YNc(1,A,1,1,"td",20),t.TgZ(2,"td"),t._uU(3),t.qZA(),t.TgZ(4,"td")(5,"div",21),t._UZ(6,"img",22),t.qZA()(),t.TgZ(7,"td")(8,"div",21),t._UZ(9,"img",22),t.qZA()(),t.TgZ(10,"td")(11,"div",21),t._UZ(12,"img",22),t.qZA()(),t.TgZ(13,"td")(14,"div",21),t._UZ(15,"img",22),t.qZA()(),t.TgZ(16,"td")(17,"div",21),t._UZ(18,"img",22),t.qZA()(),t.TgZ(19,"td",23),t._uU(20),t.qZA(),t.TgZ(21,"td",23),t._uU(22),t.qZA(),t.YNc(23,y,5,0,"td",24),t.qZA()),2&o){const n=a.$implicit,e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.showRows),t.xp6(2),t.Oqu(n.id),t.xp6(3),t.Q6J("nzSrc",n.photo[0])("nzFallback",e.fallback),t.xp6(3),t.Q6J("nzSrc",n.photo[1])("nzFallback",e.fallback),t.xp6(3),t.Q6J("nzSrc",n.photo[2])("nzFallback",e.fallback),t.xp6(3),t.Q6J("nzSrc",n.photo[3])("nzFallback",e.fallback),t.xp6(3),t.Q6J("nzSrc",n.photo[4])("nzFallback",e.fallback),t.xp6(1),t.Q6J("nzEllipsis",!0),t.xp6(1),t.Oqu(n.title),t.xp6(1),t.Q6J("nzEllipsis",!0),t.xp6(1),t.Oqu(n.created_at),t.xp6(1),t.Q6J("ngIf",!e.showRows)}}function S(o,a){if(1&o&&(t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td")(4,"div",21),t._UZ(5,"img",22),t.qZA()(),t.TgZ(6,"td")(7,"div",21),t._UZ(8,"img",22),t.qZA()(),t.TgZ(9,"td")(10,"div",21),t._UZ(11,"img",22),t.qZA()(),t.TgZ(12,"td")(13,"div",21),t._UZ(14,"img",22),t.qZA()(),t.TgZ(15,"td")(16,"div",21),t._UZ(17,"img",22),t.qZA()(),t.TgZ(18,"td"),t._uU(19),t.qZA()()),2&o){const n=a.$implicit,e=t.oxw();t.xp6(2),t.Oqu(n.id),t.xp6(3),t.Q6J("nzSrc",n.photo[0])("nzFallback",e.fallback),t.xp6(3),t.Q6J("nzSrc",n.photo[1])("nzFallback",e.fallback),t.xp6(3),t.Q6J("nzSrc",n.photo[2])("nzFallback",e.fallback),t.xp6(3),t.Q6J("nzSrc",n.photo[3])("nzFallback",e.fallback),t.xp6(3),t.Q6J("nzSrc",n.photo[4])("nzFallback",e.fallback),t.xp6(2),t.Oqu(n.title)}}function J(o,a){if(1&o){const n=t.EpF();t.TgZ(0,"div",15)(1,"span",29),t.NdJ("click",function(){return t.CHM(n),t.oxw().showCheckbox()}),t.qZA()()}}const O=function(){return[0,80]},U=function(){return[0,40]},B=[{path:"",component:(()=>{class o{constructor(n,e,l,s){this.modal=n,this.adminService=e,this.galleryService=l,this.msg=s,this.allBanners=[],this.activeBanners=[],this.showRows=!1,this.tableLoading=!1,this.fallback="../../../assets/img/loading.jpg",this.tabsIndex=1,this.setOfChecked=new Set}isChecked(n,e){e?this.setOfChecked.add(n):e||this.setOfChecked.delete(n)}showCheckbox(){this.showRows=!this.showRows,this.setOfChecked.clear()}showConfirm(n){this.confirmModal=this.modal.confirm({nzTitle:"\u0425\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0431\u0430\u043d\u043d\u0435\u0440?",nzContent:"\u041d\u0430\u0436\u0438\u043c\u0430\u044f \u041e\u041a, \u0432\u044b \u043f\u043e\u043b\u043d\u043e\u0441\u0442\u044c\u044e \u0443\u0434\u0430\u043b\u0438\u0442\u0435 \u0441\u043e\u0437\u0434\u0430\u043d\u043d\u044b\u0439 \u0432\u0430\u043c\u0438 \u0431\u0430\u043d\u043d\u0435\u0440",nzCancelText:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",nzCentered:!0,nzClosable:!1,nzAutofocus:null,nzOnOk:()=>{this.deleteBanner(n)}})}tabsControle(n){this.tabsIndex=n}getBanners(){this.tableLoading=!0,this.getSub=this.galleryService.get().subscribe({next:n=>{this.allBanners=n,this.tableLoading=!1},error:()=>{this.tableLoading=!1,this.msg.error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c")}})}getActiveBanners(){this.galleryService.getTrue().subscribe({next:n=>{this.activeBanners=n,this.tableLoading=!1},error:()=>{this.tableLoading=!1}})}deleteBanner(n){this.tableLoading=!0,this.deleteSub=this.galleryService.delete(n).subscribe({next:()=>{this.allBanners=this.allBanners.filter(e=>e.id!==n),this.tableLoading=!1,this.msg.success(" \u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u043e")},error:()=>{this.tableLoading=!1,this.msg.error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0443\u0434\u0430\u043b\u0438\u0442\u044c")}})}isActive(n,e){n?this.msg.error("\u041d\u0435\u0432\u043e\u0437\u043c\u043e\u0436\u043d\u043e \u0443\u0434\u0430\u043b\u0438\u0442\u044c, \u0431\u0430\u043d\u043d\u0435\u0440 \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0439"):this.showConfirm(e)}setActiveBanner(){const n=[];this.setOfChecked.forEach(e=>{n.push(e)}),this.galleryService.update(n).subscribe({next:()=>{this.getBanners(),this.getActiveBanners(),this.showCheckbox(),this.tableLoading=!1,this.msg.success(" \u0423\u0441\u043f\u0435\u0448\u043d\u043e \u043d\u0430\u0437\u043d\u0430\u0447\u0435\u043d")},error:()=>{this.tableLoading=!1,this.msg.error("\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u043d\u0430\u0437\u043d\u0430\u0447\u0438\u0442\u044c")}})}ngOnInit(){setTimeout(()=>{this.adminService.changePage(1)},10),this.getBanners(),this.getActiveBanners()}ngOnDestroy(){this.getSub&&this.getSub.unsubscribe(),this.deleteSub&&this.deleteSub.unsubscribe(),this.putSub&&this.putSub.unsubscribe(),this.getActuveSub&&this.getActuveSub.unsubscribe()}}return o.\u0275fac=function(n){return new(n||o)(t.Y36(z.Sf),t.Y36(Z.l),t.Y36(m.r),t.Y36(p.dD))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-gallery"]],features:[t._Bn([p.dD])],decls:56,vars:18,consts:[[1,"banner__container"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","24"],["nz-col","","nzSpan","24",1,"tab"],[3,"nzType"],["nzTitle","\u0412\u0441\u044f \u0433\u0430\u043b\u043b\u0435\u0440\u0435\u044f",3,"nzClick"],[3,"nzData","nzLoading","nzPageSize"],["banners",""],[3,"nzWidth",4,"ngIf"],[4,"ngFor","ngForOf"],["nzTitle","\u0410\u043a\u0442\u0438\u0432\u043d\u044b\u0435 \u0413\u0430\u043b\u0435\u0440\u0435\u0438",3,"nzClick"],[3,"nzData","nzLoading","nzPageSize","nzShowPagination"],["active",""],["nz-row","","nzAlign","middle",1,"tab__buttons",3,"nzGutter"],["nz-col","",4,"ngIf"],["nz-col",""],["nz-icon","","title","\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c","nzType","reload","nzTheme","outline",1,"tab__reload",3,"click"],[3,"nzWidth"],["nz-button","","nzType","primary",3,"disabled","click"],["nz-icon","","nzType","check"],[3,"nzChecked","nzCheckedChange",4,"ngIf"],[1,"banner__img"],["nz-image","","onerror","this.parentNode.removeChild(this)",3,"nzSrc","nzFallback"],[3,"nzEllipsis"],[4,"ngIf"],[3,"nzChecked","nzCheckedChange"],["nz-row","","nzJustify","space-between"],["title","\u0423\u0434\u0430\u043b\u0438\u0442\u044c",1,"button",3,"click"],["nz-icon","","nzType","delete","nzTheme","outline"],["nz-icon","","title","\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \u0430\u043a\u0442\u0438\u0432\u043d\u044b\u0435","nzType","folder-add","nzTheme","outline",1,"tab__add",3,"click"]],template:function(n,e){if(1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",1)(4,"div",3)(5,"nz-tabset",4)(6,"nz-tab",5),t.NdJ("nzClick",function(){return e.tabsControle(1)}),t.TgZ(7,"nz-table",6,7)(9,"thead")(10,"tr"),t.YNc(11,T,5,3,"th",8),t.TgZ(12,"th"),t._uU(13,"ID"),t.qZA(),t.TgZ(14,"th"),t._uU(15,"\u0424\u043e\u0442\u043e 1"),t.qZA(),t.TgZ(16,"th"),t._uU(17,"\u0424\u043e\u0442\u043e 2"),t.qZA(),t.TgZ(18,"th"),t._uU(19,"\u0424\u043e\u0442\u043e 3"),t.qZA(),t.TgZ(20,"th"),t._uU(21,"\u0424\u043e\u0442\u043e 4"),t.qZA(),t.TgZ(22,"th"),t._uU(23,"\u0424\u043e\u0442\u043e 5"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),t.qZA(),t.TgZ(26,"th"),t._uU(27,"\u0414\u0430\u0442\u0430"),t.qZA(),t.YNc(28,x,2,1,"th",8),t.qZA()(),t.TgZ(29,"tbody"),t.YNc(30,k,24,17,"tr",9),t.qZA()()(),t.TgZ(31,"nz-tab",10),t.NdJ("nzClick",function(){return e.tabsControle(2)}),t.TgZ(32,"nz-table",11,12)(34,"thead")(35,"tr")(36,"th"),t._uU(37,"ID"),t.qZA(),t.TgZ(38,"th"),t._uU(39,"\u0424\u043e\u0442\u043e 1"),t.qZA(),t.TgZ(40,"th"),t._uU(41,"\u0424\u043e\u0442\u043e 2"),t.qZA(),t.TgZ(42,"th"),t._uU(43,"\u0424\u043e\u0442\u043e 3"),t.qZA(),t.TgZ(44,"th"),t._uU(45,"\u0424\u043e\u0442\u043e 4"),t.qZA(),t.TgZ(46,"th"),t._uU(47,"\u0424\u043e\u0442\u043e 5"),t.qZA(),t.TgZ(48,"th"),t._uU(49,"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435"),t.qZA()()(),t.TgZ(50,"tbody"),t.YNc(51,S,20,12,"tr",9),t.qZA()()()(),t.TgZ(52,"div",13),t.YNc(53,J,2,0,"div",14),t.TgZ(54,"div",15)(55,"span",16),t.NdJ("click",function(){return e.getBanners(),e.getActiveBanners()}),t.qZA()()()()()()()()),2&n){const l=t.MAs(8),s=t.MAs(33);t.xp6(1),t.Q6J("nzGutter",t.DdM(16,O)),t.xp6(2),t.Q6J("nzGutter",t.DdM(17,U)),t.xp6(2),t.Q6J("nzType","card"),t.xp6(2),t.Q6J("nzData",e.allBanners)("nzLoading",e.tableLoading)("nzPageSize",10),t.xp6(4),t.Q6J("ngIf",e.showRows),t.xp6(17),t.Q6J("ngIf",!e.showRows),t.xp6(2),t.Q6J("ngForOf",l.data),t.xp6(2),t.Q6J("nzData",e.activeBanners)("nzLoading",e.tableLoading)("nzPageSize",5)("nzShowPagination",!1),t.xp6(19),t.Q6J("ngForOf",s.data),t.xp6(1),t.Q6J("nzGutter",20),t.xp6(1),t.Q6J("ngIf",1===e.tabsIndex)}},directives:[c.SK,c.t3,d.xH,d.xw,r.N8,r.Om,r.$Z,u.O5,r.Uo,r._C,_.ix,C.dQ,v.w,f.Ls,r.p0,u.sg,r.h7,b.Ie,r.ky],styles:[".button[_ngcontent-%COMP%]{font-size:18px;background:inherit}.button[_ngcontent-%COMP%]:hover{color:red;transform:scale(119%)}.banner__container[_ngcontent-%COMP%]{position:relative;padding:20px 20px 0;height:100%;overflow-y:scroll}.banner__img[_ngcontent-%COMP%]{width:50px;height:50px;pointer-events:none}.banner__img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.alert[_ngcontent-%COMP%]{position:fixed;z-index:1000;top:10%;right:35px;width:50%}.tab[_ngcontent-%COMP%]{position:relative;font-size:24px}.tab__buttons[_ngcontent-%COMP%]{position:absolute;margin-top:25px;top:0;right:0}.tab__reload[_ngcontent-%COMP%]{cursor:pointer}.tab__reload[_ngcontent-%COMP%]:hover{color:green}.tab__add[_ngcontent-%COMP%]{cursor:pointer}.tab__add[_ngcontent-%COMP%]:hover{color:green}[nz-button][_ngcontent-%COMP%]{width:100%}"]}),o})()}];let G=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[h.Bz.forChild(B)],h.Bz]}),o})();var Q=i(5737),w=i(7581),E=i(1047),M=i(9400);let q=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[u.ez,G,r.HQ,Q.S,c.Jb,f.PV,w.cS,z.Qp,E.o7,_.sL,d.we,M.ZJ,b.Gb]]}),o})()}}]);